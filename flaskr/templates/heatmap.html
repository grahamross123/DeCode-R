{% extends 'base.html' %} {% block header %}
<meta id="img-path" data-name="{{ slide_image }}" />
{% endblock %} {% block content %}
<script type="module">
  import {
    listenFormChange,
    addGraph,
    deleteGraph,
  } from "{{ url_for('static', filename='heatmap.js') }}";
  var graphIdx = 0;
  const predictions = JSON.parse(`{{ predictions | tojson | safe }}`);
  const mutations = Object.keys(predictions);
  listenFormChange(predictions);
  document.querySelector("#add-graph-button").addEventListener("click", () => {
    addGraph($("#img-path").data().name, mutations, (graphIdx += 1));
  });
  window.deleteGraph = deleteGraph;
  addGraph($("#img-path").data().name, mutations, (graphIdx += 1));
</script>

<a href="/">Return to menu</a>
<div class="row">
  <script></script>
</div>
<div style="display: block">
  <button id="add-graph-button">Add graph</button>
</div>
{% endblock %}
